(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,function(e,a,t){e.exports=t.p+"static/media/baratheon-faction.f747f280.jpg"},function(e,a,t){e.exports=t.p+"static/media/tyrell-faction.dd85fbc0.jpg"},function(e,a,t){e.exports=t.p+"static/media/targaryen-faction.fb754a61.jpg"},function(e,a,t){e.exports=t.p+"static/media/stark-faction.108159c3.jpg"},function(e,a,t){e.exports=t.p+"static/media/nights-watch-faction.eacde39a.jpg"},function(e,a,t){e.exports=t.p+"static/media/martell-faction.c3db4ae8.jpg"},function(e,a,t){e.exports=t.p+"static/media/lannister-faction.e6651acc.jpg"},function(e,a,t){e.exports=t.p+"static/media/greyjoy-faction.7736e9f8.jpg"},function(e,a,t){e.exports=t.p+"static/media/card-back.0c56143c.png"},,,,,,,,,,,,,,,,function(e,a,t){e.exports=t(74)},,,,,function(e,a,t){},,,,,function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),r=t(27),l=t.n(r),i=t(3),o=t(7),s=(t(40),function(e){var a=e.to.replace(/\//g,""),t=a.slice(0,1).toUpperCase().concat(a.slice(1));return c.a.createElement("div",{className:"nav-btn-container hover-float"},c.a.createElement(i.c,{className:"nav-btn",to:e.to},c.a.createElement("div",{className:"light"},t)),c.a.createElement("div",{className:"nav-bg-screen"}),c.a.createElement("div",{className:"nav-btn-bg"},c.a.createElement("div",{className:"side-left"}),c.a.createElement("div",{className:"center"}),c.a.createElement("div",{className:"side-right"})))}),d=(t(45),function(){return c.a.createElement(n.Fragment,null,c.a.createElement("div",{className:"nav-bg-screen"}),c.a.createElement("div",{className:"nav-bg-container"},c.a.createElement("div",{className:"nav-bg-row"},c.a.createElement("div",{className:"nav-bg-col corner-left-top"}),c.a.createElement("div",{className:"nav-bg-col side-top"}),c.a.createElement("div",{className:"nav-bg-col corner-right-top"})),c.a.createElement("div",{className:"nav-bg-row"},c.a.createElement("div",{className:"nav-bg-col side-left"}),c.a.createElement("div",{className:"nav-bg-col center"}),c.a.createElement("div",{className:"nav-bg-col side-right"})),c.a.createElement("div",{className:"nav-bg-row"},c.a.createElement("div",{className:"nav-bg-col corner-left-bottom"}),c.a.createElement("div",{className:"nav-bg-col side-bottom"}),c.a.createElement("div",{className:"nav-bg-col corner-right-bottom"}))))}),u=(t(46),function(){var e=[{to:"/get"},{to:"/play"},{to:"/my"}].map(function(e){return c.a.createElement(s,Object.assign({key:e.to},e))});return c.a.createElement("nav",null,c.a.createElement("div",{className:"nav-controls-container"},e),c.a.createElement(d,null))}),m=(t(47),function(e){var a="btn hover-float".concat(e.className?" ".concat(e.className):""),t=e.style?e.style:{};return e.to?c.a.createElement(i.c,{className:a,style:t,to:e.to,id:e.id},c.a.createElement("div",null,e.children?e.children:c.a.createElement("span",{className:"light"},e.title))):c.a.createElement("button",{className:a,style:t,id:e.id,onClick:e.onClick,onPress:e.onPress},e.children?e.children:c.a.createElement("span",{className:"light"},e.title))}),h=(t(48),function(e){return c.a.createElement("div",{className:"splash"},c.a.createElement("div",{className:"splash-display"},c.a.createElement("header",null,c.a.createElement("h1",null,"A Game of Thrones LCG"),c.a.createElement("h2",null,"Deck player")),c.a.createElement("section",null,c.a.createElement(m,{to:"/get"},"Get decks and cards."),c.a.createElement(m,{to:"/play"},"Play the game."),c.a.createElement(m,{to:"/my"},"My decks and cards."))))}),f=t(30),v=t(31),E=t(34),p=t(32),g=t(8),N=t(33),A=(t(49),function(e){return Object(n.useEffect)(function(){window.scrollTo({top:0,behavior:"smooth"})},[]),c.a.createElement("div",{className:"page".concat(e.className?" ".concat(e.className):"")},e.children)}),b=(t(50),function(e){return c.a.createElement("div",{className:"search-input-container"},c.a.createElement("input",{id:e.id,type:"text",value:e.value,onChange:e.handleOnChange}))}),C=function(){return c.a.createElement("div",{className:"no-results"},c.a.createElement("h3",null,"No results."))},k=(t(51),function(e){var a=e.className?"ui-card".concat(" ").concat(e.className):"ui-card";return c.a.createElement("div",{className:a,onClick:e.onClick,onPress:e.onPress},e.children)}),O=(t(52),t(11)),y=t.n(O),S=t(12),T=t.n(S),R=t(13),j=t.n(R),w=t(14),D=t.n(w),M=t(15),x=t.n(M),P=t(16),L=t.n(P),I=t(17),H=t.n(I),_=t(18),K=t.n(_),G={baratheon:y.a,tyrell:T.a,targaryen:j.a,stark:D.a,thenightswatch:x.a,martell:L.a,lannister:H.a,greyjoy:K.a},J=function(e){var a=e.deck,t=a.name,n=a.description_md,r="deck-ui-card-container".concat(e.className?" ".concat(e.className):"");return c.a.createElement(k,{className:r,onClick:e.onClick},c.a.createElement("div",{className:"deck-ui-card-header-left"},c.a.createElement("img",{src:G[e.deck.faction_code],alt:""})),c.a.createElement("div",{className:"deck-ui-card-metadata"},c.a.createElement("div",{className:"deck-ui-card-title"},c.a.createElement("h3",null,t)),c.a.createElement("div",{className:"deck-ui-card-description"},c.a.createElement("p",null,n))))},U=window.localStorage,W={add:function(e,a,t){var n="object"===typeof t?JSON.stringify(t):t;U.setItem("".concat(e,"_").concat(a),n)},save:function(e,a){var t="savelist_".concat("decklist"===a?"deck":a),n=JSON.parse(U.getItem(t)),c=[].concat(null!==n?n:[]).flat().filter(function(a){return a!==e}).concat(e);U.setItem(t,JSON.stringify(c))},get:function(e,a,t){var n="savelist"===e?"decklist":e,c=function(e){return JSON.parse(U.getItem("".concat(n,"_").concat(e)))};if(t){var r=Object.keys(U).filter(function(a){return a.indexOf(e)>-1});if("savelist"===e){var l=JSON.parse(U.getItem(r[0]));return l?l.map(function(e){return c(e)}):[]}return r.map(function(e){return JSON.parse(U.getItem(e))})}return c(a)},clear:function(e,a){a&&"all"===a?U.clear():U.remove(e)}},F=function(e){var a=100*Math.random();return e.indexOf(a)>-1&&(a*=2),e.push(a),a},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.type,t=e.id,n=e.scope,c=void 0===n?"public":n,r=e.format,l=void 0===r?".json":r,i="".concat("https://thronesdb.com/api","/").concat(c,"/").concat(a,"/").concat(t).concat(l);return new Promise(function(e,a){var t=new XMLHttpRequest;t.onreadystatechange=function(){4===this.readyState&&200===this.status&&e(this.responseText)},t.open("GET",i),t.send()})},V=[-1],X=function(e){var a="string"===typeof e?JSON.parse(e):e;return Object.assign({},a,{cardKey:F(V),status:"standing"})},q=function(e){return B({type:"card",id:e}).then(function(e){return X(e)}).catch(function(a){return console.error("Error getting card from id ".concat(e),a)})},Y=function(e){return B({type:"decklist",id:e}).then(function(e){return JSON.parse(e)}).catch(function(e){console.error(e)})},$=function(e){return W.get("card",e)},z=function(e){return W.get("decklist",e)},Q=function(e,a){var t="card"===e?q:Y,n=("card"===e?$:z)(a);return new Promise(function(c){n?c(n):t(a).then(function(a){"card"===e?c(a):function(e,a){var t="string"===typeof e?JSON.parse(e):e,n=Object.keys(t.slots).map(function(e){return q(e)});Promise.all(n).then(function(e){var n=e.map(function(e){var a=t.slots[e.code];return Array.from({length:a},function(){return X(e)})});a(n.flat())}).catch(function(e){console.error(e)})}(a,function(e){var t=Object.assign({},a,{cards:e});c(t)})})})},Z=(t(53),function(e){function a(e){var t;return Object(f.a)(this,a),(t=Object(E.a)(this,Object(p.a)(a).call(this,e))).state={inputValue:"",searchResults:null},t.handleOnChange=t.handleOnChange.bind(Object(g.a)(t)),t.handleSearchInput=t.handleSearchInput.bind(Object(g.a)(t)),t.renderSearchResults=t.renderSearchResults.bind(Object(g.a)(t)),t.renderResult=t.renderResult.bind(Object(g.a)(t)),t}return Object(N.a)(a,e),Object(v.a)(a,[{key:"handleOnChange",value:function(e){this.setState({inputValue:e.target.value})}},{key:"handleSearchInput",value:function(){}},{key:"handleSearchReturned",value:function(e){this.setState({searchResults:JSON.parse(e)})}},{key:"renderResult",value:function(e){console.log("renderResult",e);var a=e.hasOwnProperty("slots")||e.hasOwnProperty("cards")?"decks":"cards";return c.a.createElement(i.c,{key:e.id,to:"".concat(this.props.match.url,"/").concat(a,"/").concat(e.id)},c.a.createElement(J,{deck:e}))}},{key:"renderResults",value:function(e){var a=[];return e.filter(function(e){var t=-1===a.indexOf(e.id);return a.push(e.id),t}).map(this.renderResult)}},{key:"renderSearchResults",value:function(e){if(e)return[e.filter(function(e){return"deck"===e.type}),e.filter(function(e){return"card"===e.type})].map(this.renderResults)}},{key:"render",value:function(){var e=this.renderSearchResults(this.state.searchResults),a=this.renderResults(W.get("decklist",null,!0));return c.a.createElement(A,{className:"get-root"},c.a.createElement("header",null,c.a.createElement("h1",null,"Get decks and cards"),c.a.createElement("div",{className:"search"},c.a.createElement(b,{id:"get-search-input",value:this.state.inputValue,handleOnChange:this.handleOnChange}),c.a.createElement(m,{title:"Search",onClick:this.handleSearchInput}))),c.a.createElement("div",{className:"search-results-container"},e&&e.length>0?e:c.a.createElement(C,null)),a&&a.length>0&&c.a.createElement("div",{className:"search-results-recent"},c.a.createElement("h2",null,"Recently searched decks"),c.a.createElement("div",{className:"deck-results-container"},a)))}}]),a}(n.Component)),ee=t(1),ae=(t(54),function(){return c.a.createElement("div",{className:"loading"},c.a.createElement("h5",null,c.a.createElement("em",null,"Loading...")))}),te=function(e){var a=Object(n.useState)(z(e.match.params.id)),t=Object(ee.a)(a,2),r=t[0],l=t[1];Object(n.useEffect)(function(){r||Q("deck",e.match.params.id).then(function(a){W.add("decklist",e.match.params.id,a),l(a)}).catch(function(e){console.info("err @ getDeck"),console.error(e)})});var i=r?c.a.createElement(n.Fragment,null,c.a.createElement("header",null,c.a.createElement("h1",null,r.name)),c.a.createElement("div",{className:"get-deck-controls"},c.a.createElement(m,{title:"Save",onClick:function(){return W.save(r.id,"decklist")}})),c.a.createElement("div",{className:"get-deck-metadata"}),c.a.createElement("div",{className:"get-deck-cardlist"},c.a.createElement("div",{className:"get-deck-cardlist-viewcontrols"}))):c.a.createElement(ae,null);return c.a.createElement(A,{className:"get-decks"},c.a.createElement("div",{className:"get-decks-title"},c.a.createElement(m,{to:"/get"},"\u2190")),c.a.createElement("div",{className:"get-decks-display"},i))},ne=function(e){return console.log("GetCards",e),c.a.createElement(A,{className:"get-cards"})},ce=function(e){var a=e.match;return c.a.createElement(n.Fragment,null,c.a.createElement(o.a,{exact:!0,path:a.url,component:Z}),c.a.createElement(o.a,{path:"".concat(a.url,"/decks/:id"),component:te}),c.a.createElement(o.a,{path:"".concat(a.url,"/cards/:id"),component:ne}))},re=(t(55),function(e){return c.a.createElement("div",{className:"hud-display-container"},c.a.createElement("div",{className:"hud-tokens-container"},c.a.createElement("div",{className:"hud-gold"},e.tokenState.gold),c.a.createElement("div",{className:"hud-initiative"},e.tokenState.initiative?e.tokenState.initiative:"-"),c.a.createElement("div",{className:"hud-claim"},e.tokenState.claim?e.tokenState.claim:"-")),c.a.createElement("div",{className:"hud-phase-container"},c.a.createElement("div",null,e.phase)),c.a.createElement("div",{className:"hud-admin-controls"},c.a.createElement(m,{title:"Revert",onClick:e.handleRevert})))}),le=t(19),ie=t.n(le),oe=(t(56),function(e){return c.a.createElement("div",{className:"card-img"},c.a.createElement("img",{src:e.isBackside?ie.a:e.src,alt:""}))}),se=(t(57),function(e){var a="card".concat(e.card?" ".concat(e.card.status):""," ").concat(e.isLandscape?"landscape":"portrait").concat(e.isBackside?" backside":"").concat(e.className?" ".concat(e.className):"");return c.a.createElement("div",{className:a,onClick:e.onClick,onPress:e.onPress,onContextMenu:e.onContextMenu},c.a.createElement(oe,{src:e.isBackside?ie.a:e.card.image_url}))}),de=(t(58),function(e){var a=e.cards.filter(function(e){return"agenda"===e.type_code})[0],t=e.cards.filter(function(e){return"faction"===e.type_code})[0],r=Object(n.useState)(a?a.cardKey:t.cardKey),l=Object(ee.a)(r,2),i=l[0],o=l[1];return c.a.createElement("div",{className:"faction-area"},c.a.createElement("div",{className:"border",id:"Agenda"},a&&c.a.createElement("div",{onClick:function(){return o(a.cardKey)},className:"agenda-card".concat(i===a.cardKey?" focus":"")},c.a.createElement(se,{card:a})),c.a.createElement("div",{onClick:function(){return e.handleKneel(t,"factionArea")},className:"faction-card".concat(i===t.cardKey?" focus":"")},c.a.createElement(se,{card:t}))))}),ue=(t(59),function(e){var a=Object(n.createRef)();Object(n.useEffect)(function(){window.addEventListener("click",function t(n){a.current?a.current.contains(n.target)||e.handleClose():window.removeEventListener("window",t)})},[a,e]);var t={top:e.pos.y,left:e.pos.x};return c.a.createElement("div",{ref:a,className:"context-menu-container",style:t},c.a.createElement("div",{className:"context-menu"},e.options?e.options.map(function(e){return c.a.createElement("div",{key:e,className:"context-menu-option"},e)}):e.children))}),me={CHARACTER:"character",LOCATION:"location",HAND:"hand",DISCARD:"discard",PLOT:"plot",PLOT_DISCARD:"plotDiscard",DRAW_AREA:"drawPileArea",FACTION_AREA:"factionArea",DEAD_AREA:"dead",get all(){return[this.CHARACTER,this.LOCATION,this.HAND,this.DISCARD,this.PLOT,this.PLOT_DISCARD,this.DRAW_AREA,this.FACTION_AREA,this.DEAD_AREA]}},he={SETUP:"setup",PLOT:"plot",DRAW:"draw",MARSHAL:"marshal",CHALLENGES:"challenges",DOMINATION:"domination",TAXATION:"taxation",STANDING:"standing",get all(){return[this.SETUP,this.PLOT,this.DRAW,this.MARSHAL,this.CHALLENGES,this.DOMINATION,this.TAXATION,this.STANDING]},get allWithoutSetup(){var e=this;return this.all.filter(function(a){return a!==e.SETUP})}},fe={CHARACTER:"character",LOCATION:"location",EVENT:"event",ATTACHMENT:"attachment",PLOT:"plot",FACTION:"faction",get all(){return[this.CHARACTER,this.LOCATION,this.EVENT,this.ATTACHMENT,this.PLOT,this.FACTION]}},ve=[{label:"marshal",availableCards:[fe.CHARACTER,fe.LOCATION,fe.ATTACHMENT],availablePhases:[he.MARSHAL],availableContext:[me.HAND]},{label:"put into play",availableCards:[fe.CHARACTER,fe.LOCATION],availablePhases:[he.SETUP,he.CHALLENGES,he.DOMINATION],availableContext:[me.HAND,me.DISCARD,me.DEAD_AREA]},{label:"play",availableCards:[fe.EVENT],availablePhases:[he.allWithoutSetup],availableContext:[me.HAND]},{label:"play from discard",availableCards:[fe.EVENT],availablePhases:[he.allWithoutSetup],availableContext:[me.DISCARD]},{label:"discard",availableCards:[fe.CHARACTER,fe.LOCATION,fe.ATTACHMENT,fe.EVENT],availablePhases:[he.allWithoutSetup],availableContext:[me.HAND]},{label:"kneel",availableCards:[fe.CHARACTER,fe.LOCATION],availablePhases:[he.allWithoutSetup],availableContext:[me.CHARACTER,me.LOCATION]},{label:"kill",availableCards:[fe.CHARACTER],availablePhases:[he.allWithoutSetup],availableContext:[me.CHARACTER]},{label:"choose plot",availableCards:[fe.PLOT],availablePhases:[he.PLOT],availableContext:[me.PLOT]},{label:"return to plot pile",availableCards:[fe.PLOT],availableContext:[me.PLOT_DISCARD],availablePhases:[he.all]},{label:"ambush",availableCards:[fe.CHARACTER,fe.LOCATION],availablePhases:[he.CHALLENGES],availableContext:[me.HAND]}],Ee=(t(60),function(e){var a=Object(n.useState)(!1),t=Object(ee.a)(a,2),r=t[0],l=t[1],i=e.card,o=e.context,s=e.handleCardMove,d=e.handleKneel,u=e.handleDismiss,h={faction:"factionArea",deck:"drawPileArea",plot:"plotArea",hand:"hand",character:"characterArea",location:"locationArea",event:"discardArea",plotDiscard:"plotDiscardArea",discard:"discardArea",dead:"deadArea"}[i.type_code],f=ve.filter(function(e){return e.availableCards.indexOf(i.type_code)>-1}).filter(function(e){return e.availableContext.indexOf(o)>-1}),v=function(){u&&u()},E=function(){s(h),v()},p={marshal:E,"put into play":E,play:E,discard:function(){s("discardArea"),v()},kneel:function(){d(i),v()},kill:function(){s("deadArea"),v()},"choose plot":function(){s("plotDiscardArea"),v()}};return c.a.createElement("div",{className:"card-focus-controls"},f.length&&f.length>0?f.map(function(e){return c.a.createElement(m,{key:e.label,title:e.label,onClick:"attachment"===i.type_code?function(){return l(!0)}:p[e.label]})}):c.a.createElement(function(){return c.a.createElement("div",null,c.a.createElement("p",null,"Can't take any action on this card right now."))},null),r&&c.a.createElement(function(){return c.a.createElement("div",{className:"options-attachment-container"})},null))}),pe=(t(61),function(e){var a=e.isLandscape;return c.a.createElement("div",{className:"no-cards".concat(a?" landscape":"")},c.a.createElement("div",{id:"no-cards-inner-container"}))}),ge=function(e){var a=Object(n.useState)(null),t=Object(ee.a)(a,2),r=t[0],l=t[1],i=Object(n.useState)(null),o=Object(ee.a)(i,2),s=o[0],d=o[1],u=e.cards&&e.cards.map(function(a){return c.a.createElement("div",{key:a.cardKey,className:"card-inplay-slot"},c.a.createElement(se,{card:a,onContextMenu:function(e){return function(e,a){e.preventDefault(),r||(l({x:e.clientX,y:e.clientY}),d(a))}(e,a)},onClick:function(){return e.handleKneel(a,e.area)},className:"hover-rotate"}))}),m={gridTemplateColumns:"repeat(".concat(e.cards.length,", ").concat("12em",")")};return c.a.createElement("div",{className:"".concat(e.area.replace(/Area/g,""),"-area")},c.a.createElement("div",{className:"border",id:"".concat(e.area.slice(0,1).toUpperCase().concat(e.area.replace(/Area/g,"").slice(1)),"s(").concat(e.cards.length,")"),style:m},u&&u.length>0?u:c.a.createElement(pe,null)),r&&c.a.createElement(ue,{pos:r,handleClose:function(){return l(null)}},c.a.createElement(Ee,{card:s,context:e.area.replace(/Area/g,""),handleCardMove:function(a){e.handleCardMove(s,e.area,a),d(null)},handleKneel:function(){return e.handleKneel(s,e.area)},handleDismiss:function(){return l(null)}})))},Ne=(t(62),function(e){return c.a.createElement(ge,Object.assign({area:"characterArea"},e))}),Ae=(t(63),function(e){return c.a.createElement(ge,Object.assign({area:"locationArea"},e))}),be=(t(64),function(e){return c.a.createElement("div",{className:"card-focus"},c.a.createElement(m,{onClick:e.handleDismiss},"\u2190"),c.a.createElement("div",null,c.a.createElement(se,{card:e.card}),c.a.createElement(Ee,{context:e.context,card:e.card,handleCardMove:e.handleCardMove,handleKneel:e.handleKneel})))}),Ce=function(e){var a=Object(n.useState)(!1),t=Object(ee.a)(a,2),r=t[0],l=t[1],i=function(e){return l(e)};return r?c.a.createElement(be,{phase:e.phase,card:r,context:e.context,handleCardMove:function(a){e.handleCardMove(r,e.context,a),e.handleModalDismiss()},handleDismiss:function(){return i(null)}}):e.cards.map(function(e){return c.a.createElement(se,{className:"hover-float",key:e.cardKey,card:e,onClick:function(){return i(e)}})})},ke=function(e){var a=function(){return c.a.createElement(Ce,Object.assign({},e,{context:"plot",handleModalDismiss:function(){return e.handleModalToggle(null)}}))};return c.a.createElement("div",{className:"plot-area"},c.a.createElement("div",{className:"border",id:"Plot(".concat(e.cards.length,")")},e.cards.length>0?c.a.createElement(se,{className:"hover-float",isBackside:!0,isLandscape:!0,onClick:function(){return e.handleModalToggle(a)}}):c.a.createElement(pe,{isLandscape:!0})))},Oe=(t(65),function(e){var a=e.cards&&e.cards.length>0?c.a.createElement(se,{card:e.cards[e.cards.length-1],className:"plot hover-float"}):c.a.createElement(pe,null);return c.a.createElement("div",{className:"plot-discard-area"},c.a.createElement("div",{className:"border",id:"Plot-Discard(".concat(e.cards.length,")")},a))}),ye=(t(66),function(e){return c.a.createElement(se,{className:"draw-pile hover-float",isBackside:!0,onClick:function(){return e.handleDraw()}})}),Se=function(e){var a=e.area.replace(/Area/g,""),t=c.a.createElement(Ce,Object.assign({},e,{context:a,handleModalDismiss:function(){return e.handleModalToggle(null)}})),n=e.cards&&e.cards.length&&e.cards[e.cards.length-1]?c.a.createElement(se,{isLandscape:"deadArea"===e.area,key:e.cards[e.cards.length-1].cardKey,card:e.cards[e.cards.length-1],onClick:function(){return e.handleModalToggle(t)},className:"hover-float"}):c.a.createElement(pe,null);return c.a.createElement("div",{className:"".concat(a,"-pile")},c.a.createElement("div",{className:"border",id:"".concat(e.area.slice(0,1).toUpperCase().concat(e.area.slice(1).replace(/Area/g,"")),"(").concat(e.cards?e.cards.length:0,")")},n))},Te=(t(67),function(e){return c.a.createElement(Se,Object.assign({area:"discardArea"},e))}),Re=(t(68),function(e){return c.a.createElement(Se,Object.assign({area:"deadArea"},e))}),je=(t(69),function(e){var a=Object(n.useState)(!1),t=Object(ee.a)(a,2),r=t[0],l=t[1],i=e.cards.map(function(e){return c.a.createElement(se,{key:e.cardKey,card:e,onClick:function(){return l(e)}})});return r?c.a.createElement(be,{handleCardMove:function(a){l(!1),e.handleCardMove(r,"hand",a),e.handleModalDismiss()},phase:e.phase,card:r,context:"hand",handleDismiss:function(){return l(null)}}):i}),we=function(e){var a=c.a.createElement(je,{cards:e.cards,phase:e.phase,handleCardMove:e.handleCardMove,handleModalDismiss:function(){return e.handleModalToggle(null)}});return c.a.createElement("div",{className:"hand hover-float",onClick:function(){return e.handleModalToggle(a)}},[1,2,3].map(function(e){return c.a.createElement(oe,{key:e,isBackside:!0})}))},De=(t(70),function(e){var a=e.isLeft&&e.isShowing||!e.isLeft&&!e.isShowing?"\u2190":"\u2192",t=e.isLeft?{right:0}:{left:0};return c.a.createElement(m,{className:"toggle-show-button ".concat(e.isShowing?"showing":"collapsed"),onClick:e.onClick,style:t},c.a.createElement("span",null,a))}),Me=(t(71),function(e){return c.a.createElement("div",{className:"modal-container"},c.a.createElement(k,{className:"modal-display-container"},c.a.createElement("div",{className:"close-btn hover-float",onClick:e.handleClose},"\xd7"),c.a.createElement("div",{className:"modal-display"},e.children&&e.children)),c.a.createElement("div",{className:"modal-bg"}))}),xe=(t(72),function(e){var a=Object(n.useState)(null),t=Object(ee.a)(a,2),r=t[0],l=t[1],i=Object(n.useState)(!0),o=Object(ee.a)(i,2),s=o[0],d=o[1],u=Object(n.useState)(!0),m=Object(ee.a)(u,2),h=m[0],f=m[1],v=function(a,t,n){console.log("moveCardTo",t),/(plot|dead|discard)/gi.test(t)&&(t=t.concat("Area")),console.log("moveCardTo",a,t,n),e.handleGameStateUpdate({card:a,fromArea:t,targetArea:n})},E=function(e,a,t){},p=function(a,t){e.handleGameStateUpdate({card:a,cardStatus:"standing"===a.status?"kneeling":"standing",fromArea:t})},g=function(e){return"left"===e?d(!s):f(!h)},N={gridTemplateColumns:"".concat(s?"20em":"3em"," auto ").concat(h?"22.5em":"3em")};return c.a.createElement("div",{className:"game-board",style:N},c.a.createElement(re,{phase:e.gameState.phase,tokenState:e.gameState.tokenState,handleRevert:function(){0!==e.gameState.length&&e.handleGameStateUpdate("revert")}}),c.a.createElement("div",{className:"lefthand-area ".concat(s?"showing":"collapsed")},c.a.createElement("div",{className:"area"},c.a.createElement(Oe,{cards:e.gameState.plotDiscardArea,handleCardMove:v,handleModalToggle:l}),c.a.createElement(ke,{cards:e.gameState.plotArea,handleCardMove:v,handleModalToggle:l})),c.a.createElement(De,{isLeft:!0,isShowing:s,onClick:function(){return g("left")}})),c.a.createElement("div",{className:"area in-play-area showing"},c.a.createElement(Ne,{cards:e.gameState.characterArea,handleCardMove:v,handleTokenMove:E,handleKneel:p}),c.a.createElement(Ae,{cards:e.gameState.locationArea,handleCardMove:v,handleTokenMove:E,handleKneel:p})),c.a.createElement("div",{className:"righthand-area ".concat(h?"showing":"collapsed")},c.a.createElement("div",{className:"area"},c.a.createElement(de,{cards:e.gameState.factionArea,handleTokenMove:E,handleKneel:p}),c.a.createElement(Te,{cards:e.gameState.discardArea,handleCardMove:v,handleModalToggle:l}),c.a.createElement(Re,{cards:e.gameState.deadArea,handleCardMove:v,handleModalToggle:l})),c.a.createElement(De,{isShowing:h,onClick:function(){return g("right")}})),c.a.createElement("div",{className:"play-controls-area"},c.a.createElement(we,{phase:e.gameState.phase?e.gameState.phase:"marshal",cards:e.gameState.hand,handleCardMove:v,handleModalToggle:l}),c.a.createElement(ye,{cards:e.gameState.drawPileArea,handleDraw:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;e.handleGameStateUpdate({drawAmt:a})}})),r&&c.a.createElement(Me,{handleClose:function(){return l(null)}},r))}),Pe=function(e){var a=W.get("decklist",null,"all").map(function(a){return c.a.createElement(J,{className:"hover-float",deck:a,key:a.id,onClick:function(){return e.handleSelectDeck(a)}})});return c.a.createElement("div",{className:"game-setup"},c.a.createElement("header",null,c.a.createElement("h1",null,"Select a deck to play.")),c.a.createElement("div",{className:"deck-results-container"},a))},Le=function(e){for(var a=e.length-1;a>0;a-=1){var t=Math.floor(Math.random()*(a+1)),n=[e[t],e[a]];e[a]=n[0],e[t]=n[1]}return e},Ie=t(20),He=function(e,a){return Object.assign({},a,function(){if(e.targetArea){var t,n=a[e.fromArea].filter(function(a){return a.cardKey!==e.card.cardKey}),c=a[e.targetArea].concat(e.card);return t={},Object(Ie.a)(t,e.fromArea,n),Object(Ie.a)(t,e.targetArea,c),t}if(e.cardStatus){var r={status:e.cardStatus},l=Object.assign({},e.card,r),i=a[e.fromArea].map(function(a){return a.cardKey===e.card.cardKey?l:a});return Object(Ie.a)({},e.fromArea,i)}if(e.drawAmt){var o=a.drawPileArea.slice(0,e.drawAmt),s=a.drawPileArea.slice(e.drawAmt+1);return{hand:a.hand.concat(o).flat(),drawPileArea:s}}}())},_e={baratheon:y.a,greyjoy:K.a,lannister:H.a,martell:L.a,thenightswatch:x.a,stark:D.a,targaryen:j.a,tyrell:T.a},Ke=function(){var e=Object(n.useState)([]),a=Object(ee.a)(e,2),t=a[0],r=a[1],l={phase:"plot",drawPileArea:[],plotArea:[],hand:[],characterArea:[],locationArea:[],plotDiscardArea:[],discardArea:[],deadArea:[],tokenState:{gold:0,initiative:null,claim:null}},i=function(){return t[t.length-1]};return c.a.createElement(A,{className:"play-container"},0===t.length?c.a.createElement(Pe,{handleSelectDeck:function(e){var a=function(e){return"agenda"===e.type_code},n=function(e){return"plot"===e.type_code},c={cardKey:-1,faction_code:e.faction_code,status:"standing",tokenState:{gold:0,power:0},type_code:"faction",image_url:_e[e.faction_code]},i=e.cards.filter(a).concat(c),o=e.cards.filter(n),s=Le(e.cards.filter(function(e){return!a(e)&&!n(e)})),d=s.slice(0,7),u={factionArea:i,drawPileArea:s.slice(8),plotArea:o,hand:d},m=Object.assign({},l,u);r(t.concat(m))}}):c.a.createElement(xe,{gameState:i(),handleGameStateUpdate:function(e){if("revert"===e){var a=1===t.length?[l]:t.slice(0,t.length-1);r(a)}r(t.concat(He(e,i())))}}))},Ge=function(e){var a=W.get("savelist",null,"all").map(function(a){return c.a.createElement(i.c,{key:a.id,to:"".concat(e.match.url,"/decks/").concat(a.id)},c.a.createElement(J,{deck:a}))});return c.a.createElement(A,{className:"my-root"},c.a.createElement("header",null,c.a.createElement("h1",null,"My decks and cards")),c.a.createElement("div",{className:"deck-results-container"},a))},Je=function(e){var a=W.get("decklist",e.match.params.id),t=a?c.a.createElement("header",null,a.name):c.a.createElement("div",null,c.a.createElement("h1",null,"Deck not found."));return c.a.createElement(A,{className:"my-decks"},c.a.createElement("div",{className:"back-button-container"},c.a.createElement(m,{to:"/my"},"\u2190")),c.a.createElement("div",{className:"deck-display-single"},t))},Ue=function(e){return c.a.createElement(A,{className:"my-cards"})},We=function(e){return c.a.createElement(n.Fragment,null,c.a.createElement(o.a,{exact:!0,path:e.match.url,component:Ge}),c.a.createElement(o.a,{path:"".concat(e.match.url,"/decks/:id"),component:Je}),c.a.createElement(o.a,{path:"".concat(e.match.url,"/cards/:id"),component:Ue}))},Fe=(t(73),function(e){var a=window.location.href.indexOf("github.io")>-1;return c.a.createElement("div",{className:"app"},a?function(e){return c.a.createElement(i.b,null,e)}(e):function(e){return c.a.createElement(i.a,null,e)}(e))}),Be=function(){var e=c.a.createElement(n.Fragment,null,c.a.createElement(u,null),c.a.createElement(o.c,null,c.a.createElement(o.a,{exact:!0,path:"/",component:h}),c.a.createElement(o.a,{path:"/get",component:ce}),c.a.createElement(o.a,{path:"/play",component:Ke}),c.a.createElement(o.a,{path:"/my",component:We})));return Fe(e)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(Be,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[35,1,2]]]);
//# sourceMappingURL=main.05d6e9d2.chunk.js.map